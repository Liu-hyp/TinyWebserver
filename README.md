# TinyWebserver

Linux下基于C++的轻量级Web服务器

## 特点

- 使用非阻塞socket
- 使用epoll LT实现异步通信
- Acceptor作为任务分发器负责监听客户端连接请求，子线程完成与客户端的通信

- 建立服务器监听

  1. 创建socket

     SOCK_STEREAM

  2. 设置套接字属性

     SO_LINGER：优雅下线

     SO_REUSEADDR：地址复用

     O_NONBLOCK：手动控制多线程处理同一个socket事件

  2. 填充服务器网络信息结构体

     函数：inet_addr

  4. bind：将服务器用来通信的地址和端口信息绑定到socket上
  
  5. epoll建立内核事件表，委托内核检测文件描述符对应的读写缓冲区的状态
  
     - LT/ET模式管理服务端和客户端socket
     - EPOLLONESHOT
     - EPOLLRDHUP
  
  5. 使用定时器管理非活跃socket，管理系统资源
  
     使用双向链表管理定时器，添加新定时器时使链表有序，链表上的定时器按照expire值升序排列
     
  5. 服务器处理http请求
  
     - 接收请求：服务器监听特定的网络端口，等待客户端发送HTTP请求。一旦请求到达服务器，服务器会接收并读取请求内容。
     
     - 解析请求：服务器解析HTTP请求，包括请求方法（GET、POST等）、请求头、请求体等信息。
     
     - 处理请求：服务器根据解析得到的信息执行相应的处理逻辑，可能包括读取或写入数据库、调用其他服务等。
     
     - 生成响应：服务器根据处理结果生成HTTP响应，包括状态码、响应头、响应体等。
     
     - 发送响应：服务器将生成的HTTP响应发送回客户端，通过网络传输到客户端的浏览器或应用程序。
     
     - 断开连接：一旦响应发送完成，服务器断开与客户端的连接，等待下一个请求。
     
       在处理大量并发请求时，服务器通常会采用多线程、多进程或异步处理等技术，以提高性能和吞吐量。
     
  5. 
  
  5. 
  
      